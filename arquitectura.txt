googlerun/
â”œâ”€ .env
â”œâ”€ .gitignore
â”œâ”€ Dockerfile
â”œâ”€ LICENCE
â”œâ”€ Makefile
â”œâ”€ pyproject.toml
â”œâ”€ README.md
â”œâ”€ requirements.txt
â”œâ”€ requirements_test.txt
â”œâ”€ 
â”‚
â”œâ”€ src/
â”‚  â”œâ”€ ai/                               # conexiÃ³n con los modelos LLM
â”‚  â”‚  â”œâ”€ gemini.py                      # Punto de entrada FastAPI (Cloud Run)
â”‚  â”œâ”€ api/                              # ğŸŒ Capa API REST (FastAPI)
â”‚  â”‚  â”œâ”€ main.py                        # Punto de entrada FastAPI (Cloud Run)
â”‚  â”‚  â”œâ”€ routes/                        
â”‚  â”‚  â”‚   â”œâ”€ audio_pipeline.py          # Endpoint /process-audio
â”‚  â”‚  â”‚   â””â”€ health.py                  # Endpoint /health
â”‚  â”‚  â””â”€ middleware/
â”‚  â”‚      â””â”€ error_handler.py           # Middleware global para logs y excepciones
â”‚  â”‚
â”‚  â”œâ”€ domain/                           # ğŸ§© Entidades y schemas (Pydantic)
â”‚  â”‚  â”œâ”€ schemas.py                     # Modelos de entrada/salida API (AudioRequest, AudioResponse, etc.)
â”‚  â”‚  â””â”€ prompts/
â”‚  â”‚      â”œâ”€ transcription_prompt.md.j2 # Plantilla del prompt
â”‚  â”‚      â””â”€ report_prompt.md.j2        # (futuro) para anÃ¡lisis o reportes
â”‚  â”‚
â”‚  â”œâ”€ ingestion/                        # ğŸ“¥ Entrada de datos y descargas
â”‚  â”‚  â”œâ”€ audio_loader.py                # (opcional) carga local / preprocesamiento
â”‚  â”‚  â”œâ”€ audio_processor.py             # NormalizaciÃ³n / conversiÃ³n / chunking
â”‚  â”‚  â”œâ”€ auth.py                        # AutenticaciÃ³n OAuth2 (Drive)
â”‚  â”‚  â”œâ”€ auth_service.py                # AutenticaciÃ³n (service account)
â”‚  â”‚  â”œâ”€ drive_loader.py                # Descarga de archivos desde Drive
â”‚  â”‚  â””â”€ google_auth_manager.py         # Gestiona el mÃ©todo de AutenticaciÃ³n
â”‚  â”‚
â”‚  â”œâ”€ transcription/                    # ğŸ—£ï¸ TranscripciÃ³n de audio
â”‚  â”‚  â”œâ”€ gemini_transcriber.py          # TranscripciÃ³n usando Gemini
â”‚  â”‚  â”œâ”€ stt_vertex.py                  # TranscripciÃ³n usando Speech-to-Text
â”‚  â”‚  â””â”€ diarization.py                 # (futuro) separaciÃ³n por hablante
â”‚  â”‚
â”‚  â”œâ”€ llm/                              # ğŸ§  Clientes de modelos LLM (vÃ­a Vertex)
â”‚  â”‚  â”œâ”€ base.py
â”‚  â”‚  â”œâ”€ vertex_client.py
â”‚  â”‚  â”œâ”€ claude_adapter.py
â”‚  â”‚  â””â”€ mistral_adapter.py
â”‚  â”‚
â”‚  â”œâ”€ maintenance/                      #
â”‚  â”‚  â””â”€ limpia_drive.py                #
â”‚  â”‚
â”‚  â”œâ”€ orchestration/                    # ğŸ”„ OrquestaciÃ³n de flujos
â”‚  â”‚  â”œâ”€ runner.py                      # Pipeline principal (usa audio_url en lugar de Sheets)
â”‚  â”‚  â””â”€ tasks.py                       # Subtareas (descarga, procesar, transcribir)
â”‚  â”‚
â”‚  â”œâ”€ storage/                          # â˜ï¸ GestiÃ³n de archivos
â”‚  â”‚  â”œâ”€ audio_normalizer_service.py    # 
â”‚  â”‚  â”œâ”€ drive_uploader.py              # 
â”‚  â”‚  â”œâ”€ gcs_cleaner.py                 # 
â”‚  â”‚  â”œâ”€ gcs_uploader.py                # 
â”‚  â”‚  â”œâ”€ upload_service.py              # 
â”‚  â”‚  â””â”€ local.py                       # I/O local en /tmp
â”‚  â”‚
â”‚  â”œâ”€ pdf/                              # ğŸ“„ GeneraciÃ³n de informes (futuro)
â”‚  â”‚  â”œâ”€ processor.py
â”‚  â”‚  â”œâ”€ renderer.py
â”‚  â”‚  â”œâ”€ styles.py
â”‚  â”‚  â””â”€ templates/
â”‚  â”‚      â””â”€ report.html.j2
â”‚  â”‚
â”‚  â”œâ”€ logging_conf.py                   # ConfiguraciÃ³n de logging centralizada
â”‚  â”œâ”€ settings.py                       # ConfiguraciÃ³n global y lectura de .env
â”‚  â””â”€ utils/                            # Funciones auxiliares (ej. timestamps, text cleaning)
â”‚
â”œâ”€ tests/
â”‚  â”œâ”€ test_auth.py
â”‚  â”œâ”€ test_runner_integration.py
â”‚  â”œâ”€ test_transcription_gemini.py
â”‚  â””â”€ test_api_audio.py                 # Test real del endpoint /process-audio
â”‚
â””â”€ data/
   â”œâ”€ input/
   â”œâ”€ work/
   â””â”€ output/
